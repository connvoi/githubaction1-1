name: SSH-TEST
on: push

jobs:
    build:
        name: ssh test
        runs-on: ubuntu-latest
        steps:
            - name: making ssh keys
              run: echo "$SSH_PRIVATE_KEY" > key && chmod 600 key
              env:
                SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
            - name: test ssh
              run: ssh -i key -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p $SERVER_PORT kyagi@$SERVER_NAME "touch /home/kyagi/test.log"
              env:
                SERVER_NAME: ${{ secrets.SERVER_IP }}
                SERVER_PORT: ${{ secrets.SERVER_PORT }}
